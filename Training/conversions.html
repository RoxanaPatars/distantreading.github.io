<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:t="http://www.tei-c.org/ns/1.0" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><title>How to make a sparrow-hawk out of a turkey: some tricks and techniques for
                    text conversion</title><meta name="generator" content="Generated by TEISLIDY stylesheet"></meta><script src="https://www.w3.org/Talks/Tools/Slidy/slidy.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" media="screen, projection" href="https://www.w3.org/Talks/Tools/Slidy/show.css"></link><link href="../css/egXMLhandling.css" rel="stylesheet" type="text/css"></link><link href="../css/tei.css" rel="stylesheet" type="text/css"></link></head><body class="simple" id="TOP"><div class="slide cover"><img src="../media/logo.jpg" width="40%" style="float:left" alt="[Your logo here]" class="cover"></img><br clear="all"></br><h1>How to make a sparrow-hawk out of a turkey: some tricks and techniques for
                    text conversion</h1><p></p></div><div class="slide"><h2>What's in my toolbox?</h2><ul><li class="item"><span class="">curl</span>: command line utility to download files from a given URL</li><li class="item"><span class="">iconv</span> : command line utility to convert non-Unicode characters into Unicode</li><li class="item"><span class="">tidy</span> : swiss army knife utility from W3C to sanitize HTML</li><li class="item"><span class="">perl</span> for quick and dirty character mungeing</li><li class="item"><span class="">XSLT</span> standard stylesheet language for XML conversions</li><li class="item">and <span class="">oXygen</span> and <span class="">emacs</span> (of course)</li></ul></div><div class="slide"><h2>Case study 1: a Latvian novel in minimal HTML</h2><p>The recipe: </p><ul><li class="item">take one page of HTML links and edit it into a script which downloads each chapter to a separate file </li><li class="item">convert each file's encoding from windows-1257 to UTF8</li><li class="item">run a perl script on each chapter file to convert the HTML tags</li><li class="item">create a minimal header and append each chapter file to it</li></ul></div><div class="slide"><h2>Identify and grab the source files</h2><div class="figure"><img src="../media/latvian-0.png" alt="" class="graphic" style=" width:80%;"></img></div></div><div class="slide"><h2>An example HTML file</h2><div class="figure"><img src="../media/latvian-1.png" alt="" class="graphic" style=" width:80%;"></img></div></div><div class="slide"><h2>Another nifty shell script</h2><div id="index.xml-egXML-d30e83" class="pre cdata egXML_valid"><!--This otherwise redundant comment ensures egXMLs format nicely-->
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp&nbsp;LV0001-hdr.txt&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0201.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0202.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0203.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0204.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0205.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0206.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0207.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0208.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0209.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0210.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0211.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0212.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0213.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0214.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0215.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0216.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0217.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0218.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0219.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconv&nbsp;Orig/ZeibJ0220.htm&nbsp;-f&nbsp;windows-1257&nbsp;-t&nbsp;utf-8&nbsp;|&nbsp;perl&nbsp;retag.prl&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;tail.txt&nbsp;&gt;&gt;&nbsp;LV0001.eltec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><p class="box">The file <span class="ident">LV001-hdr.txt</span> contains the top part of a TEI file, including a skeleton header; <span class="ident">tail.txt</span> contains the closing <span class="gi">&lt;/body&gt;&lt;/TEI&gt;</span>.</p></div><div class="slide"><h2>The perl script that does the work</h2><div class="frame"><div class="col left"><ul><li class="item">read next line</li><li class="item">if there's a <span class="gi">&lt;big&gt;</span> and some roman numbers, start a new chapter</li><li class="item">otherwise break paragraphs on <span class="gi">&lt;br&gt;</span> tags</li><li class="item">turn &amp;nbsp; into &amp;#160</li><li class="item">remove uninteresting HTML tags</li></ul></div><div class="col right"><div class="figure"><img src="../media/latvian-3.png" alt="" class="graphic"></img></div></div></div></div><div class="slide"><h2>The TEI output produced</h2><div class="figure"><img src="../media/latvian-5.png" alt="" class="graphic" style=" width:75%;"></img></div></div></body></html>